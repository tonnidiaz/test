<!DOCTYPE html>
<html>
    <head>
        <title>Heikin-Ashi Chart with Chart.js</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.min.js"></script>
   
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    </head>
    <body>
        <canvas id="heikinAshiChart" width="800" height="400"></canvas>

        <script>
            // Example data: array of objects with open, high, low, and close prices
            const data = [
                { open: 100, high: 105, low: 95, close: 102 },
                { open: 102, high: 110, low: 101, close: 108 },
                { open: 108, high: 115, low: 107, close: 113 },
                // ... more data
            ];

            // Function to calculate Heikin-Ashi data
            function calculateHeikinAshi(data) {
                const heikinAshiData = [];
                for (let i = 0; i < data.length; i++) {
                    const prev = heikinAshiData[i - 1] || data[i];
                    const close =
                        (data[i].open +
                            data[i].high +
                            data[i].low +
                            data[i].close) /
                        4;
                    const open = (prev.open + prev.close) / 2;
                    const high = Math.max(data[i].high, open, close);
                    const low = Math.min(data[i].low, open, close);

                    heikinAshiData.push({ open, high, low, close });
                }
                return heikinAshiData;
            }

            const heikinAshiData = calculateHeikinAshi(data);

            // Convert Heikin-Ashi data for Chart.js
            const chartData = heikinAshiData.map((point, i) => ({
                x: new Date() * i * 1000, // use appropriate time data here
                o: point.open,
                h: point.high,
                l: point.low,
                c: point.close,
            }));

            console.log(chartData);

            // Create the Heikin-Ashi chart
            const ctx = document
                .getElementById("heikinAshiChart")
                .getContext("2d");
            new Chart(ctx, {
                type: "candlestick",
                data: {
                    datasets: [
                        {
                            label: "Heikin-Ashi",
                            data: chartData,
                        },
                    ],
                },
                options: {
                    plugins: {
                        legend: {
                            display: false,
                        },
                    },
                },
            });
        </script>
    </body>
</html>
